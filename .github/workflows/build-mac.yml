name: Build macOS Pygame App

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: macos-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: pip install pygame pyinstaller

      - name: Build .app
        run: |
          pyinstaller --windowed \
                      --name MyPygameGame \
                      --add-data "v1_2.png:." \
                      --add-data "v1_4.png:." \
                      --add-data "v1_8.png:." \
                      --add-data "v1_16.png:." \
                      --add-data "v1_32.png:." \
                      --add-data "v1_64.png:." \
                      --add-data "v1_128.png:." \
                      --add-data "v1_256.png:." \
                      --add-data "v1_512.png:." \
                      --add-data "v1_1024.png:." \
                      --add-data "v1_2048.png:." \
                      --add-data "v1_4096.png:." \
                      --add-data "v1_8192.png:." \
                      --add-data "v1_16384.png:." \
                      --add-data "v2_2.png:." \
                      --add-data "v2_4.png:." \
                      --add-data "v2_8.png:." \
                      --add-data "v2_16.png:." \
                      --add-data "v2_32.png:." \
                      --add-data "v2_64.png:." \
                      --add-data "v2_128.png:." \
                      --add-data "v2_256.png:." \
                      --add-data "v2_512.png:." \
                      --add-data "v2_1024.png:." \
                      --add-data "v2_2048.png:." \
                      --add-data "v2_4096.png:." \
                      --add-data "v2_8192.png:." \
                      --add-data "v2_16384.png:." \
                      --add-data "v3_2.png:." \
                      --add-data "v3_4.png:." \
                      --add-data "v3_8.png:." \
                      --add-data "v3_16.png:." \
                      --add-data "v3_32.png:." \
                      --add-data "v3_64.png:." \
                      --add-data "v3_128.png:." \
                      --add-data "v3_256.png:." \
                      --add-data "v3_512.png:." \
                      --add-data "v3_1024.png:." \
                      --add-data "v3_2048.png:." \
                      --add-data "v3_4096.png:." \
                      --add-data "v3_8192.png:." \
                      --add-data "v3_16384.png:." \
                      --add-data "pince.png:." \
                      --add-data "main.png:." \
                      main.py

      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: MyPygameGame
          path: dist/MyPygameGame.app
